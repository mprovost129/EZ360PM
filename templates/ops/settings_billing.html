{% extends "ops/_base.html" %}
{% block title %}Billing settings · Ops · EZ360PM{% endblock %}

{% block ops_title %}Billing settings{% endblock %}
{% block ops_subtitle %}<div class="ez-ops-muted small">Subscription catalog and Stripe configuration controls.</div>{% endblock %}
{% block ops_actions %}<a class="btn btn-outline-dark ez-ops-btn" href="{% url 'ops:settings_home' %}"><i class="bi bi-arrow-left me-1"></i>Settings</a>{% endblock %}

{% block ops_content %}
<div class="row g-2">
                  <div class="col-md-6">
                    <label class="form-label small mb-1">Stripe monthly price id</label>
                    {{ form.stripe_monthly_price_id }}
                    {% if form.stripe_monthly_price_id.errors %}<div class="text-danger small">{{ form.stripe_monthly_price_id.errors|join:", " }}</div>{% endif %}
                  </div>
                  <div class="col-md-6">
                    <label class="form-label small mb-1">Stripe annual price id</label>
                    {{ form.stripe_annual_price_id }}
                    {% if form.stripe_annual_price_id.errors %}<div class="text-danger small">{{ form.stripe_annual_price_id.errors|join:", " }}</div>{% endif %}
                  </div>
                </div>
              </td>
            </tr>
          {% endfor %}
          </tbody>
        </table>
      </div>

      {% if plan_formset.non_form_errors %}
        <div class="alert alert-danger">{{ plan_formset.non_form_errors }}</div>
      {% endif %}

      <hr class="my-4">

      <h2 class="h6 mb-2">Extra seats add-on</h2>
      <div class="text-secondary small mb-3">Displayed on the Pricing page and used for the seat add-on Stripe Price IDs (if provided).</div>

      <div class="row g-2">
        <div class="col-md-3">
          <label class="form-label">$ / month</label>
          {{ seat_form.monthly_price }}
        </div>
        <div class="col-md-3">
          <label class="form-label">$ / year</label>
          {{ seat_form.annual_price }}
        </div>
        <div class="col-md-3">
          <label class="form-label">Stripe monthly price id</label>
          {{ seat_form.stripe_monthly_price_id }}
        </div>
        <div class="col-md-3">
          <label class="form-label">Stripe annual price id</label>
          {{ seat_form.stripe_annual_price_id }}
        </div>
      </div>
    </div>
    <div class="card-footer d-flex align-items-center justify-content-between">
      <div class="text-secondary small">Tip: You can update display prices here without changing Stripe; only the Checkout uses Stripe price IDs.</div>
      <button class="btn btn-ez" type="submit">Save billing settings</button>
    </div>
  </form>
</div>
{% endblock %}
