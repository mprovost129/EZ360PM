{% extends "base_app.html" %}
{% block title %}Support Mode · EZ360PM{% endblock %}

{% block content %}
<div class="container-fluid" style="max-width: 1100px;">
  <div class="d-flex flex-wrap align-items-center justify-content-between gap-2 mb-3">
    <div>
      <h1 class="h3 mb-0">Support Mode</h1>
      <div class="text-secondary small">Time-limited, audited access to a subscriber company. Support mode is read-only by default.</div>
    </div>
    <a class="btn btn-outline-secondary" href="{% url 'core:support_mode_status' %}">Status</a>
  </div>

  <div class="card shadow-sm">
    <div class="card-body">
      <form method="get" class="row g-2 align-items-end mb-3">
        <div class="col-12 col-md-6">
          <label class="form-label">Search companies</label>
          <input class="form-control" type="text" name="q" value="{{ q }}" placeholder="Search by name or id">
        </div>
        <div class="col-12 col-md-2">
          <button class="btn btn-primary w-100" type="submit">Search</button>
        </div>
      </form>

      <form method="post" class="row g-3">
        {% csrf_token %}
        <div class="col-12 col-md-6">
          <label class="form-label">Select company</label>
          <select class="form-select" name="company_id" required>
            <option value="">— Select —</option>
            {% for c in companies %}
              <option value="{{ c.id }}">{{ c.name }} ({{ c.id }})</option>
            {% endfor %}
          </select>
          <div class="form-text">Search above to populate this list.</div>
        </div>

        <div class="col-12 col-md-3">
          <label class="form-label">Duration (minutes)</label>
          <select class="form-select" name="minutes">
            <option value="15">15</option>
            <option value="30" selected>30</option>
            <option value="60">60</option>
            <option value="90">90</option>
            <option value="120">120</option>
          </select>
        </div>

        <div class="col-12">
          <label class="form-label">Reason (required)</label>
          <input class="form-control" type="text" name="reason" placeholder="e.g., customer requested help reconciling invoices" required maxlength="500">
        </div>

        <div class="col-12 d-flex gap-2">
          <button class="btn btn-danger" type="submit">Enable Support Mode</button>
          <a class="btn btn-outline-secondary" href="{% url 'core:app_dashboard' %}">Cancel</a>
        </div>
      </form>
    </div>
  </div>
</div>
{% endblock %}
