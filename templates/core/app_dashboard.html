{% extends "base_app.html" %}
{% load static %}

{% block title %}Dashboard Â· EZ360PM{% endblock %}

{% block content %}
  <div class="d-flex flex-wrap align-items-center justify-content-between gap-2 mb-3">
    <div>
      <h1 class="ez-page-title">Dashboard</h1>
      <div class="ez-page-subtitle">Your command center for clients, projects, time, billing, and reporting.</div>
    </div>
    <div class="d-flex gap-2">
      {% if can_customize_dashboard %}
        <a class="btn btn-outline-dark" href="{% url 'core:dashboard_customize' %}">
          <i class="bi bi-sliders me-1"></i>Customize
        </a>
      {% endif %}
      <a class="btn btn-outline-secondary" href="{% url 'helpcenter:getting_started' %}">
        <i class="bi bi-question-circle me-1"></i>Help
      </a>
      <a class="btn btn-outline-dark" href="{% url 'companies:settings' %}">
        <i class="bi bi-gear me-1"></i>Company settings
      </a>
    </div>
  </div>

  {# Render widgets based on the resolved layout #}
  <div class="row g-3">
    <div class="col-lg-7">
      <div class="d-flex flex-column gap-3">
        {% for key in dashboard_layout.left %}
          {% with tpl="core/dashboard_widgets/"|add:key|add:".html" %}
            {% include tpl %}
          {% endwith %}
        {% endfor %}
      </div>
    </div>

    <div class="col-lg-5">
      <div class="d-flex flex-column gap-3">
        {% for key in dashboard_layout.right %}
          {% with tpl="core/dashboard_widgets/"|add:key|add:".html" %}
            {% include tpl %}
          {% endwith %}
        {% endfor %}
      </div>
    </div>
  </div>
{% endblock %}
