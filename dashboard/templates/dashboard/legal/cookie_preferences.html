{% extends "base_public.html" %}

{% block content %}
<div class="container py-4" style="max-width:720px">
  <h1 class="h4 mb-3">Cookie Preferences</h1>
  <p class="text-muted">
    Manage your cookie settings below. Essential cookies are always active; other categories are optional.
  </p>

  <form method="post" action="{% url 'dashboard:cookie_consent_set' %}" role="form">
    {% csrf_token %}
    <input type="hidden" name="choice" value="custom">

    <div class="form-check mb-2">
      <input class="form-check-input" type="checkbox" id="essential" checked disabled aria-describedby="essentialHelp">
      <label class="form-check-label" for="essential">Essential cookies (always on)</label>
      <div id="essentialHelp" class="form-text">Required for login, security, and core features.</div>
    </div>

    <div class="form-check mb-2">
      <input class="form-check-input" type="checkbox" name="analytics" id="analytics"
             {% if analytics %}checked{% endif %} aria-describedby="analyticsHelp">
      <label class="form-check-label" for="analytics">Analytics cookies</label>
      <div id="analyticsHelp" class="form-text">Help us understand usage and improve the product.</div>
    </div>

    <div class="form-check mb-3">
      <input class="form-check-input" type="checkbox" name="marketing" id="marketing"
             {% if marketing %}checked{% endif %} aria-describedby="marketingHelp">
      <label class="form-check-label" for="marketing">Marketing cookies</label>
      <div id="marketingHelp" class="form-text">Used for advertising or retargeting (if applicable).</div>
    </div>

    <div class="d-flex gap-2">
      <button type="submit" class="btn btn-primary">Save preferences</button>
      <a class="btn btn-outline-secondary" href="{% url 'dashboard:cookies' %}">Cancel</a>
    </div>
  </form>

  <hr class="my-4">
  <p class="small text-muted mb-0">Last updated: {{ effective_date|date:"Y-m-d" }}</p>
</div>
{% endblock %}
