{% extends "_public.html" %}
{% block title %}Estimate {{ est.number }} — Response{% endblock %}

{% block content %}
<div class="container py-5" style="max-width:720px">
  <main class="card shadow-sm" role="main">
    <div class="card-body">
      <h1 class="h4 mb-3">Estimate {{ est.number }}</h1>

      {% if result == "accepted" %}
        <div class="alert alert-success" role="status" aria-live="polite">
          Thanks! The estimate has been <strong>accepted</strong>.
        </div>

        {% if invoice and invoice.public_token %}
          <p class="mb-3">An invoice has been created from this estimate.</p>
          <a class="btn btn-primary" href="{% url 'invoices:invoice_public' invoice.public_token %}">View invoice</a>
        {% else %}
          <p class="text-muted mb-3">We’ll follow up shortly with the invoice.</p>
        {% endif %}

      {% elif result == "declined" %}
        <div class="alert alert-secondary" role="status" aria-live="polite">
          This estimate has been <strong>declined</strong>. We’ll be in touch.
        </div>

      {% elif result == "expired" %}
        <div class="alert alert-warning" role="status" aria-live="polite">
          This estimate has <strong>expired</strong>. Please contact us for a new quote.
        </div>

      {% else %}
        <div class="alert alert-info" role="status" aria-live="polite">
          This estimate was already processed.
        </div>
      {% endif %}

      <hr class="my-4">

      <nav aria-label="Next steps">
        <div class="d-flex flex-wrap gap-2">
          <a class="btn btn-outline-secondary" href="{% url 'estimates:estimate_public' est.public_token %}">
            Back to estimate
          </a>
          <a class="btn btn-outline-secondary" href="{% url 'dashboard:contact' %}">
            Contact us
          </a>
        </div>
      </nav>
    </div>
  </main>
</div>
{% endblock %}
