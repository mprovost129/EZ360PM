{% extends "_app_shell.html" %}
{% block page_title %}Delete Recurring Plan{% endblock %}
{% block app_content %}

<div class="card shadow-sm">
  <div class="card-body">
    {% if form and form.non_field_errors %}
      <div class="alert alert-danger">
        <ul class="mb-0">{% for err in form.non_field_errors %}<li>{{ err }}</li>{% endfor %}</ul>
      </div>
    {% endif %}

    <div class="alert alert-danger d-flex align-items-start" role="alert">
      <div>
        <div class="fw-semibold">This action cannot be undone.</div>
        <div class="small">Deleting a recurring plan won’t remove invoices already created.</div>
      </div>
    </div>

    <div class="mb-3">
      <div class="text-muted small mb-1">Plan</div>
      <div class="fw-semibold">{{ plan.title }}</div>
      <div class="text-muted small">
        Client: {{ plan.client }} ·
        Frequency: <span class="text-capitalize">{{ plan.frequency }}</span> ·
        Next run: {{ plan.next_run_date|default:"—" }} ·
        Status: <span class="text-capitalize">{{ plan.status }}</span>
      </div>
    </div>

    <p class="mb-3">Are you sure you want to delete this recurring plan?</p>

    <form method="post" action="">
      {% csrf_token %}
      <button class="btn btn-danger">Delete plan</button>
      <a class="btn btn-outline-secondary" href="{% url 'core:recurring_list' %}">Cancel</a>
      <a class="btn btn-outline-warning ms-2" href="{% url 'core:recurring_toggle' plan.pk %}">
        {% if plan.status == 'active' %}Pause instead{% else %}Activate instead{% endif %}
      </a>
      <a class="btn btn-outline-primary ms-2" href="{% url 'core:recurring_update' plan.pk %}">Edit instead</a>
    </form>
  </div>
</div>

{% endblock %}
