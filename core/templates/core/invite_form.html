{% extends "_app_shell.html" %}
{% block page_title %}Invite Member{% endblock %}

{% block app_content %}
<form method="post" novalidate>
  {% csrf_token %}
  <div class="card shadow-sm">
    <div class="card-body">
      {% if form.non_field_errors %}
        <div class="alert alert-danger mb-3">
          {{ form.non_field_errors }}
        </div>
      {% endif %}

      <div class="row g-3 align-items-start">
        <div class="col-md-6">
          <label class="form-label" for="{{ form.email.id_for_label }}">Email</label>
          {% if form.email.errors %}
            {{ form.email.as_widget(attrs={"class":"form-control is-invalid","placeholder":"name@company.com"}) }}
            <div class="invalid-feedback">
              {{ form.email.errors|striptags }}
            </div>
          {% else %}
            {{ form.email.as_widget(attrs={"class":"form-control","placeholder":"name@company.com"}) }}
          {% endif %}
        </div>

        <div class="col-md-6">
          <label class="form-label" for="{{ form.role.id_for_label }}">Role</label>
          {% if form.role.errors %}
            {{ form.role.as_widget(attrs={"class":"form-select is-invalid"}) }}
            <div class="invalid-feedback">
              {{ form.role.errors|striptags }}
            </div>
          {% else %}
            {{ form.role.as_widget(attrs={"class":"form-select"}) }}
          {% endif %}
          <div class="form-text">
            Owners/Admins can manage billing & team. Members have project-level access.
          </div>
        </div>
      </div>

      <div class="form-text mt-3">
        On development, the invite link may also appear in a flash message and server logs.
      </div>
    </div>

    <div class="card-footer d-flex justify-content-between">
      <a class="btn btn-outline-secondary" href="{% url 'core:team_list' %}">Cancel</a>
      <button class="btn btn-primary" type="submit">Send Invite</button>
    </div>
  </div>
</form>

{# Optional: if your view passes an invite_url (e.g., in dev), show it inline #}
{% if invite_url %}
  <div class="alert alert-success mt-3">
    Invite link created:
    <a class="alert-link" href="{{ invite_url }}">{{ invite_url }}</a>
  </div>
{% endif %}
{% endblock %}
